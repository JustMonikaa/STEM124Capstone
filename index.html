<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STEM Capstone: 13-Week Agile Lesson Plan</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        stone: { 50: '#fafaf9', 100: '#f5f5f4', 200: '#e7e5e4', 300: '#d6d3d1', 600: '#57534e', 800: '#292524', 900: '#1c1917' },
                        amber: { 50: '#fffbeb', 400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309' }
                    }
                }
            }
        }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f5f5f4; }
        ::-webkit-scrollbar-thumb { background: #d6d3d1; border-radius: 10px; }
        .chart-container { position: relative; width: 100%; max-width: 600px; margin: auto; height: 300px; }
        .hidden-section { display: none; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .stats-step { display: none; }
        .stats-step.active { display: block; }
        .lesson-card { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .lesson-card:hover { transform: translateY(-4px); }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 antialiased min-h-screen flex flex-col md:flex-row">

    <!-- Sidebar -->
    <nav id="sidebar" class="bg-stone-900 w-full md:w-80 flex-shrink-0 md:h-screen sticky top-0 hidden md:flex flex-col z-40 text-stone-300">
        <div class="p-8 border-b border-stone-800">
            <h1 class="text-2xl font-extrabold tracking-tighter text-white">STEM CAPSTONE</h1>
            <p class="text-[10px] uppercase tracking-[0.2em] text-amber-500 font-bold mt-1">13-Week Lesson Plan</p>
        </div>
        
        <!-- Countdown Widget -->
        <div class="px-6 py-6 bg-stone-800/50">
            <div class="flex items-center justify-between mb-3">
                <p class="text-[10px] uppercase font-bold text-stone-500">Defense Countdown</p>
                <span class="px-2 py-0.5 rounded bg-amber-500 text-stone-900 text-[9px] font-bold">LIVE</span>
            </div>
            <div id="countdown" class="grid grid-cols-3 gap-2 text-center">
                <div class="bg-stone-900 p-2 rounded border border-stone-700">
                    <span id="cd-days" class="block text-xl font-bold text-white">--</span>
                    <span class="text-[8px] uppercase text-stone-500">Days</span>
                </div>
                <div class="bg-stone-900 p-2 rounded border border-stone-700">
                    <span id="cd-hours" class="block text-xl font-bold text-white">--</span>
                    <span class="text-[8px] uppercase text-stone-500">Hours</span>
                </div>
                <div class="bg-stone-900 p-2 rounded border border-stone-700">
                    <span id="cd-mins" class="block text-xl font-bold text-white">--</span>
                    <span class="text-[8px] uppercase text-stone-500">Mins</span>
                </div>
            </div>
        </div>

        <div class="flex-1 overflow-y-auto py-4 space-y-1">
            <div class="px-8 py-2 text-[10px] font-bold text-stone-600 uppercase tracking-widest">Navigation</div>
            <button onclick="navigate('dashboard')" class="nav-item w-full text-left px-8 py-3 text-sm font-semibold transition-all hover:bg-stone-800 hover:text-white" data-target="dashboard">Course Dashboard</button>
            <button onclick="navigate('phase1')" class="nav-item w-full text-left px-8 py-3 text-sm font-semibold transition-all hover:bg-stone-800 hover:text-white" data-target="phase1">Phase 1: Validation (W1-3)</button>
            <button onclick="navigate('phase2')" class="nav-item w-full text-left px-8 py-3 text-sm font-semibold transition-all hover:bg-stone-800 hover:text-white" data-target="phase2">Phase 2: Execution (W4-7)</button>
            <button onclick="navigate('phase3')" class="nav-item w-full text-left px-8 py-3 text-sm font-semibold transition-all hover:bg-stone-800 hover:text-white" data-target="phase3">Phase 3: Reliability (W8-10)</button>
            <button onclick="navigate('phase4')" class="nav-item w-full text-left px-8 py-3 text-sm font-semibold transition-all hover:bg-stone-800 hover:text-white" data-target="phase4">Phase 4: Synthesis (W11-13)</button>
            
            <div class="px-8 pt-6 pb-2 text-[10px] font-bold text-stone-600 uppercase tracking-widest">Student Portal</div>
            <button onclick="navigate('tools')" class="nav-item w-full text-left px-8 py-3 text-sm font-semibold transition-all text-amber-500 hover:bg-stone-800" data-target="tools">Stats Engine ðŸ”“</button>
        </div>
    </nav>

    <!-- Mobile Header -->
    <header class="md:hidden bg-stone-900 text-white p-4 flex justify-between items-center sticky top-0 z-50">
        <h1 class="font-bold">STEM Capstone</h1>
        <button id="mobile-menu-btn" class="text-2xl">&#9776;</button>
    </header>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto h-screen bg-stone-50 p-6 md:p-12 lg:p-16">
        
        <!-- DASHBOARD -->
        <section id="dashboard" class="fade-in max-w-6xl mx-auto space-y-12">
            <header class="space-y-4">
                <div class="inline-block bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-xs font-bold tracking-wider">ACADEMIC YEAR 2025-2026</div>
                <h2 class="text-5xl font-extrabold text-stone-900 tracking-tight">The Capstone Agile Framework</h2>
                <p class="text-xl text-stone-500 max-w-2xl leading-relaxed">
                    A product-first lesson plan centered on the <strong>Engineering Design Process (EDP)</strong>. 
                    This course assumes prerequisite mastery of Practical Research 1 & 2.
                </p>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-white p-8 rounded-3xl shadow-sm border border-stone-100">
                    <h3 class="text-xs font-bold text-stone-400 uppercase tracking-widest mb-2">Philosophy</h3>
                    <p class="text-xl font-bold text-stone-900">Prototype First, Paper Second.</p>
                </div>
                <div class="bg-white p-8 rounded-3xl shadow-sm border border-stone-100">
                    <h3 class="text-xs font-bold text-stone-400 uppercase tracking-widest mb-2">International Standards</h3>
                    <p class="text-xl font-bold text-stone-900">ISEF & IPOPHIL Aligned.</p>
                </div>
                <div class="bg-white p-8 rounded-3xl shadow-sm border border-stone-100">
                    <h3 class="text-xs font-bold text-stone-400 uppercase tracking-widest mb-2">Timeline Constraint</h3>
                    <p class="text-xl font-bold text-stone-900">13-Week Hard Sprint.</p>
                </div>
            </div>

            <div class="bg-white p-10 rounded-[3rem] shadow-sm border border-stone-100">
                <h3 class="text-2xl font-bold mb-8">Workload Distribution</h3>
                <div class="chart-container"><canvas id="workloadChart"></canvas></div>
            </div>
        </section>

        <!-- PHASE 1 -->
        <section id="phase1" class="hidden-section fade-in max-w-5xl mx-auto space-y-12">
            <div class="bg-amber-600 p-12 rounded-[3rem] text-white">
                <h2 class="text-4xl font-extrabold mb-4">Phase 1: Validation</h2>
                <p class="text-lg opacity-90 max-w-2xl">Weeks 1-3. Establishing the "Why" through Patent Search and Community Gap Analysis. No generic topics allowed.</p>
            </div>

            <div class="space-y-6">
                <!-- Week 1 -->
                <div class="lesson-card bg-white p-8 rounded-3xl border border-stone-200 shadow-sm flex flex-col md:flex-row gap-8">
                    <div class="md:w-1/4">
                        <span class="text-4xl font-black text-amber-500 opacity-20">W1</span>
                        <h4 class="text-xl font-extrabold text-stone-900">The Patent Gap</h4>
                    </div>
                    <div class="flex-1 space-y-4">
                        <p class="text-stone-600"><strong>Objective:</strong> To validate that the proposed invention is novel using international patent databases.</p>
                        <ul class="text-sm space-y-2 list-disc list-inside text-stone-500">
                            <li>Prior Art Search via <strong>Google Patents</strong> & <strong>WIPO</strong>.</li>
                            <li>Analysis of existing commercial equivalents in the Philippine market.</li>
                        </ul>
                        <div class="bg-stone-50 p-4 rounded-xl text-xs"><strong>Output:</strong> Novelty Comparison Matrix.</div>
                    </div>
                </div>

                <!-- Week 2 -->
                <div class="lesson-card bg-white p-8 rounded-3xl border border-stone-200 shadow-sm flex flex-col md:flex-row gap-8">
                    <div class="md:w-1/4">
                        <span class="text-4xl font-black text-amber-500 opacity-20">W2</span>
                        <h4 class="text-xl font-extrabold text-stone-900">System Design</h4>
                    </div>
                    <div class="flex-1 space-y-4">
                        <p class="text-stone-600"><strong>Objective:</strong> To translate a problem into a technical schematic using the Input-Process-Output (IPO) model.</p>
                        <ul class="text-sm space-y-2 list-disc list-inside text-stone-500">
                            <li>System Architecture drafting (Circuitry or Mechanical drawings).</li>
                            <li>Identifying Measurable Variables (What exactly are we testing?).</li>
                        </ul>
                        <div class="bg-stone-50 p-4 rounded-xl text-xs"><strong>Output:</strong> Technical Schematic Diagram & Approved Title.</div>
                    </div>
                </div>

                <!-- Week 3 -->
                <div class="lesson-card bg-white p-8 rounded-3xl border border-stone-200 shadow-sm flex flex-col md:flex-row gap-8">
                    <div class="md:w-1/4">
                        <span class="text-4xl font-black text-amber-500 opacity-20">W3</span>
                        <h4 class="text-xl font-extrabold text-stone-900">Proposal Defense</h4>
                    </div>
                    <div class="flex-1 space-y-4">
                        <p class="text-stone-600"><strong>Objective:</strong> To defend the feasibility and ethical considerations of the project before a technical panel.</p>
                        <ul class="text-sm space-y-2 list-disc list-inside text-stone-500">
                            <li>ISEF Ethics Checklist (No vertebrates/toxins).</li>
                            <li>Cost-Benefit Analysis (Bill of Materials).</li>
                        </ul>
                        <div class="bg-stone-50 p-4 rounded-xl text-xs font-bold text-amber-700">GATE 1: GO / NO-GO Decision.</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PHASE 2 -->
        <section id="phase2" class="hidden-section fade-in max-w-5xl mx-auto space-y-12">
            <div class="bg-stone-900 p-12 rounded-[3rem] text-white">
                <h2 class="text-4xl font-extrabold mb-4">Phase 2: Execution</h2>
                <p class="text-lg opacity-70 max-w-2xl">Weeks 4-7. Moving from CAD/Schematics to a Minimum Viable Product (MVP). High emphasis on Logbook documentation.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white p-8 rounded-3xl border border-stone-200">
                    <h4 class="text-amber-600 font-bold uppercase tracking-widest text-xs mb-4">Week 4-5: Prototyping I</h4>
                    <p class="text-stone-700 font-bold mb-2">The "Proof of Concept" Build</p>
                    <p class="text-sm text-stone-500 mb-4">Students build the internal mechanism (e.g., breadboard for electronics, raw framework for mechanical). Does the basic code/physics work?</p>
                    <div class="bg-stone-50 p-4 rounded-xl text-xs italic">"Failure here is required. Every failed build must be documented in the Logbook for 'Process Grading'."</div>
                </div>
                <div class="bg-white p-8 rounded-3xl border border-stone-200">
                    <h4 class="text-amber-600 font-bold uppercase tracking-widest text-xs mb-4">Week 6-7: Prototyping II</h4>
                    <p class="text-stone-700 font-bold mb-2">Integration & Enclosure</p>
                    <p class="text-sm text-stone-500 mb-4">Finalizing the physical housing. Moving from breadboards to soldered PCBs. Improving the User Experience (UX).</p>
                    <ul class="text-[10px] text-stone-400 uppercase font-bold space-y-1 mt-4">
                        <li>â€¢ Final BOM Audit</li>
                        <li>â€¢ Photo Documentation</li>
                        <li>â€¢ Safety Protocol Review</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- PHASE 3 -->
        <section id="phase3" class="hidden-section fade-in max-w-5xl mx-auto space-y-12">
            <div class="bg-stone-200 p-12 rounded-[3rem] text-stone-900">
                <h2 class="text-4xl font-extrabold mb-4">Phase 3: Reliability</h2>
                <p class="text-lg text-stone-600 max-w-2xl">Weeks 8-10. Rigorous testing using statistical benchmarks. Proving the product is better than the alternative.</p>
            </div>

            <div class="grid grid-cols-1 gap-8">
                <div class="bg-white p-10 rounded-3xl border border-stone-200 shadow-sm relative overflow-hidden">
                    <div class="relative z-10 space-y-6">
                        <div class="flex items-center gap-4">
                            <span class="w-12 h-12 bg-stone-900 text-white flex items-center justify-center rounded-xl font-black">W8</span>
                            <h4 class="text-2xl font-bold">The Experimental Trial</h4>
                        </div>
                        <p class="text-stone-600"><strong>Activity:</strong> Conducting a minimum of 3 trials (Standard HS Experimental Design). Documentation of independent and dependent variables in real-time.</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="p-4 bg-stone-50 rounded-2xl border border-stone-100">
                                <span class="block text-[10px] font-bold text-stone-400 uppercase">Trial A: Control</span>
                                <p class="text-sm font-bold">How does the manual/commercial method perform?</p>
                            </div>
                            <div class="p-4 bg-amber-50 rounded-2xl border border-amber-100">
                                <span class="block text-[10px] font-bold text-amber-400 uppercase">Trial B: Experimental</span>
                                <p class="text-sm font-bold">How does your invention perform under the same conditions?</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-10 rounded-3xl border border-stone-200 shadow-sm">
                    <div class="flex items-center gap-4 mb-6">
                        <span class="w-12 h-12 bg-stone-900 text-white flex items-center justify-center rounded-xl font-black">W9-10</span>
                        <h4 class="text-2xl font-bold">Statistical Inference</h4>
                    </div>
                    <p class="text-stone-600 mb-6"><strong>Activity:</strong> Using the <strong>Expert Stats Engine</strong> to determine if the difference in performance is statistically significant (p < 0.05).</p>
                    <div class="p-6 bg-stone-900 rounded-2xl text-stone-400 text-xs font-mono">
                        [LOGIC CHECK]: If Result > Control AND p < 0.05 -> SUCCESS <br>
                        [LOGIC CHECK]: If Result <= Control -> ANALYZE FAILURE / PIVOT RECOMMENDATIONS
                    </div>
                </div>
            </div>
        </section>

        <!-- PHASE 4 -->
        <section id="phase4" class="hidden-section fade-in max-w-5xl mx-auto space-y-12">
            <div class="bg-stone-900 p-12 rounded-[3rem] text-white">
                <h2 class="text-4xl font-extrabold mb-4">Phase 4: Synthesis</h2>
                <p class="text-lg opacity-70 max-w-2xl">Weeks 11-13. The Final Presentation. Mastering the Q&A and finalizing the Science Fair poster.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white p-6 rounded-2xl border border-stone-200">
                    <span class="text-xs font-bold text-stone-400 uppercase">W11</span>
                    <h5 class="font-bold text-stone-900 mt-2">The Abstract & Poster</h5>
                    <p class="text-xs text-stone-500 mt-2">Condensing 13 weeks of work into a 250-word abstract and a visually compelling ISEF-compliant poster board.</p>
                </div>
                <div class="bg-white p-6 rounded-2xl border border-stone-200">
                    <span class="text-xs font-bold text-stone-400 uppercase">W12</span>
                    <h5 class="font-bold text-stone-900 mt-2">Mock Defense</h5>
                    <p class="text-xs text-stone-500 mt-2">Peer-to-peer judging sessions. Focus on handling "Mean Panelist" questions regarding methodology flaws.</p>
                </div>
                <div class="bg-white p-6 rounded-2xl border border-stone-200 border-2 border-amber-500">
                    <span class="text-xs font-bold text-amber-600 uppercase">W13</span>
                    <h5 class="font-bold text-stone-900 mt-2">FINAL PANEL</h5>
                    <p class="text-xs text-stone-500 mt-2">The high-stakes defense. Functional product demonstration is mandatory. Graduation clearance hinges here.</p>
                </div>
            </div>
        </section>

        <!-- TOOLS (LOCKED) -->
        <section id="tools" class="hidden-section fade-in max-w-5xl mx-auto min-h-[500px]">
            <div id="lock-screen" class="bg-white p-12 rounded-[3rem] shadow-xl border border-stone-200 text-center flex flex-col items-center justify-center min-h-[500px]">
                <div class="w-24 h-24 bg-stone-100 rounded-full flex items-center justify-center mb-8">
                    <span class="text-5xl text-stone-400">ðŸ”’</span>
                </div>
                <h3 class="text-3xl font-extrabold text-stone-900 mb-4">Student Access Required</h3>
                <p class="text-stone-500 max-w-md mb-8">This Statistical Engine is restricted to students currently in Phase 3. Please enter the passcode provided by your research advisor.</p>
                
                <div class="w-full max-w-sm space-y-4">
                    <input type="password" id="passkey" placeholder="Enter Access Code" class="w-full px-6 py-4 rounded-2xl border-2 border-stone-100 focus:border-amber-500 text-center text-lg font-bold tracking-widest focus:outline-none transition-all">
                    <button onclick="attemptUnlock()" class="w-full bg-stone-900 text-white font-bold py-4 rounded-2xl hover:bg-stone-800 transition-all shadow-xl shadow-stone-200">Unlock Tools</button>
                    <p id="error-txt" class="text-red-500 text-xs font-bold hidden">INVALID ACCESS KEY. TRY AGAIN.</p>
                </div>
            </div>

            <div id="unlocked-tools" class="hidden space-y-8">
                <!-- STATS ENGINE RE-INTEGRATED FROM PREVIOUS DESIGN -->
                <div class="bg-stone-900 p-8 rounded-3xl text-white flex justify-between items-center">
                    <div>
                        <h3 class="text-2xl font-bold">Expert Statistical Engine</h3>
                        <p class="text-xs opacity-50">Mapping: Data Nature -> IV Count -> Pairing -> Test</p>
                    </div>
                    <button onclick="resetWizard()" class="text-xs bg-stone-800 hover:bg-stone-700 px-4 py-2 rounded-lg transition">Reset Wizard</button>
                </div>

                <div class="bg-white p-12 rounded-[3rem] border border-stone-200 shadow-sm min-h-[400px]">
                    <div id="step-1" class="stats-step active">
                        <h4 class="text-xs font-bold text-stone-400 uppercase tracking-widest mb-4">Step 1: The Dependent Variable</h4>
                        <h2 class="text-3xl font-bold mb-8">What is the measurement type?</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button onclick="wizardNext(1, 'continuous')" class="p-6 border-2 border-stone-50 rounded-2xl hover:border-amber-500 hover:bg-amber-50 text-left transition-all">
                                <span class="block font-bold">Continuous</span>
                                <span class="text-xs text-stone-500">Decimals, Height, Time, Weight, pH</span>
                            </button>
                            <button onclick="wizardNext(1, 'categorical')" class="p-6 border-2 border-stone-50 rounded-2xl hover:border-amber-500 hover:bg-amber-50 text-left transition-all">
                                <span class="block font-bold">Categorical</span>
                                <span class="text-xs text-stone-500">Groups, Yes/No, Alive/Dead</span>
                            </button>
                            <button onclick="wizardNext(1, 'ordinal')" class="p-6 border-2 border-stone-50 rounded-2xl hover:border-amber-500 hover:bg-amber-50 text-left transition-all">
                                <span class="block font-bold">Ordinal</span>
                                <span class="text-xs text-stone-500">Rankings, Likert Scales (1-5)</span>
                            </button>
                        </div>
                    </div>

                    <div id="step-2" class="stats-step">
                        <h4 class="text-xs font-bold text-stone-400 uppercase tracking-widest mb-4">Step 2: Comparison Groups</h4>
                        <h2 class="text-3xl font-bold mb-8">How many levels are being compared?</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button onclick="wizardNext(2, '2groups')" class="p-6 border-2 border-stone-50 rounded-2xl hover:border-amber-500 hover:bg-amber-50 text-left transition-all font-bold">Two Groups (e.g. Invention vs Control)</button>
                            <button onclick="wizardNext(2, '3groups')" class="p-6 border-2 border-stone-50 rounded-2xl hover:border-amber-500 hover:bg-amber-50 text-left transition-all font-bold">Three+ Groups (e.g. 10%, 20%, 30% concentration)</button>
                        </div>
                    </div>

                    <div id="step-3" class="stats-step">
                        <h4 class="text-xs font-bold text-stone-400 uppercase tracking-widest mb-4">Step 3: Sample Relation</h4>
                        <h2 class="text-3xl font-bold mb-8">Are the samples Related?</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <button onclick="wizardNext(3, 'independent')" class="p-6 border-2 border-stone-50 rounded-2xl hover:border-amber-500 hover:bg-amber-50 text-left transition-all font-bold">Independent (Different Subjects)</button>
                            <button onclick="wizardNext(3, 'paired')" class="p-6 border-2 border-stone-50 rounded-2xl hover:border-amber-500 hover:bg-amber-50 text-left transition-all font-bold">Paired (Same Subject tested twice)</button>
                        </div>
                    </div>

                    <div id="step-result" class="stats-step">
                        <div class="bg-amber-50 p-10 rounded-3xl border border-amber-200 text-center">
                            <span class="text-[10px] font-bold text-amber-600 uppercase tracking-widest">Recommended Test</span>
                            <h2 id="final-test-name" class="text-4xl font-black text-stone-900 my-4">Test Name</h2>
                            <p id="final-test-desc" class="text-stone-600 mb-8 max-w-sm mx-auto">Description of the statistical logic...</p>
                            <div class="inline-block bg-white px-4 py-2 rounded-full text-[10px] font-mono border border-stone-200 text-stone-400 uppercase">Path: <span id="final-test-path">...</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        // --- Navigation ---
        function navigate(targetId) {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden-section'));
            document.getElementById(targetId).classList.remove('hidden-section');
            
            document.querySelectorAll('.nav-item').forEach(btn => {
                if(btn.dataset.target === targetId) {
                    btn.classList.add('bg-stone-800', 'text-white');
                    btn.classList.remove('text-stone-300');
                } else {
                    btn.classList.remove('bg-stone-800', 'text-white');
                    btn.classList.add('text-stone-300');
                }
            });
            if(window.innerWidth < 768) document.getElementById('sidebar').classList.add('hidden');
        }

        // --- Countdown ---
        const defenseDate = new Date("March 30, 2026 08:00:00").getTime();
        function updateCD() {
            const now = new Date().getTime();
            const dist = defenseDate - now;
            const days = Math.floor(dist / (1000 * 60 * 60 * 24));
            const hrs = Math.floor((dist % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const mins = Math.floor((dist % (1000 * 60 * 60)) / (1000 * 60));
            
            if(dist > 0) {
                document.getElementById('cd-days').innerText = days;
                document.getElementById('cd-hours').innerText = hrs;
                document.getElementById('cd-mins').innerText = mins;
            }
        }
        setInterval(updateCD, 60000);
        updateCD();

        // --- Unlock Logic ---
        function attemptUnlock() {
            const input = document.getElementById('passkey').value;
            const error = document.getElementById('error-txt');
            if(input === "lsfraven") {
                document.getElementById('lock-screen').classList.add('hidden');
                document.getElementById('unlocked-tools').classList.remove('hidden');
                error.classList.add('hidden');
            } else {
                error.classList.remove('hidden');
            }
        }

        // --- Stats Engine ---
        let path = {};
        function wizardNext(step, val) {
            path[`s${step}`] = val;
            document.getElementById(`step-${step}`).classList.remove('active');
            
            if(step === 1 && val === 'categorical') {
                showFinal("Chi-Square Test", "Tests relationship between categorical variables.", "Categorical Data");
            } else if (step === 1 || step === 2) {
                document.getElementById(`step-${step+1}`).classList.add('active');
            } else if (step === 3) {
                calcResult();
            }
        }

        function showFinal(name, desc, pStr) {
            document.querySelectorAll('.stats-step').forEach(s => s.classList.remove('active'));
            document.getElementById('step-result').classList.add('active');
            document.getElementById('final-test-name').innerText = name;
            document.getElementById('final-test-desc').innerText = desc;
            document.getElementById('final-test-path').innerText = pStr;
        }

        function calcResult() {
            const {s1, s2, s3} = path;
            let n = "Consult Advisor", d = "Complex design.", pStr = `${s1} > ${s2} > ${s3}`;
            
            if(s1 === 'continuous') {
                if(s2 === '2groups') {
                    n = (s3 === 'independent') ? "Independent T-Test" : "Paired T-Test";
                    d = "Comparing the means of two sets of continuous data.";
                } else {
                    n = (s3 === 'independent') ? "One-Way ANOVA" : "Repeated Measures ANOVA";
                    d = "Comparing means of 3 or more data groups.";
                }
            } else if (s1 === 'ordinal') {
                if(s2 === '2groups') {
                    n = (s3 === 'independent') ? "Mann-Whitney U" : "Wilcoxon Signed Rank";
                    d = "Non-parametric comparison of ranked data.";
                } else {
                    n = (s3 === 'independent') ? "Kruskal-Wallis" : "Friedman Test";
                    d = "Non-parametric version of ANOVA.";
                }
            }
            showFinal(n, d, pStr);
        }

        function resetWizard() {
            path = {};
            document.querySelectorAll('.stats-step').forEach(s => s.classList.remove('active'));
            document.getElementById('step-1').classList.add('active');
        }

        // --- Charts ---
        window.onload = function() {
            const ctx = document.getElementById('workloadChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Phase 1: Validation', 'Phase 2: Execution', 'Phase 3: Reliability', 'Phase 4: Synthesis'],
                    datasets: [{
                        label: 'Workload Intensity (%)',
                        data: [40, 95, 80, 100],
                        backgroundColor: ['#d6d3d1', '#f59e0b', '#78716c', '#1c1917'],
                        borderRadius: 12
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, max: 100 } },
                    plugins: { legend: { display: false } }
                }
            });
            navigate('dashboard');
        };

        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            const s = document.getElementById('sidebar');
            s.classList.toggle('hidden');
            s.classList.toggle('absolute');
            s.classList.toggle('w-full');
        });
    </script>
</body>
</html>
